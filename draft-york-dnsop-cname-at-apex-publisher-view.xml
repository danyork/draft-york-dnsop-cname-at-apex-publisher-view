<?xml version="1.0" encoding="UTF-8"?>
  <?xml-stylesheet type="text/xsl" href="rfc2629.xslt" ?>
  <!-- generated by https://github.com/cabo/kramdown-rfc2629 version 1.2.9 -->

<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
]>

<?rfc toc="yes"?>
<?rfc sortrefs="yes"?>
<?rfc symrefs="yes"?>

<rfc ipr="trust200902" docName="draft-york-dnsop-cname-at-apex-publisher-view-01" category="info">

  <front>
    <title abbrev="CNAME at apex - a website publisher perspective">CNAME at apex - a website publisher perspective</title>

    <author initials="D." surname="York" fullname="Dan York">
      <organization>Internet Society</organization>
      <address>
        <email>york@isoc.org</email>
      </address>
    </author>

    <date year="2018" month="November" day="06"/>

    <area>General</area>
    <workgroup>DNSOP Working Group</workgroup>
    <keyword>Internet-Draft</keyword>

    <abstract>


<t>There has been a large amount of discussion about the “CNAME at apex” issue
within the DNSOP Working Group. This draft provides the perspective of one 
publisher of multiple websites about why CNAME-like functionality is desirable
at the apex of a domain zone.</t>



    </abstract>


  </front>

  <middle>


<section anchor="introduction" title="Introduction">

<t>From the early days of the Web, publishers of websites generally operated their
main public website using the “www” subdomain, as in “www.example.com”.</t>

<t>In recent years many organizations have moved to dropping the “www” and referring
to their main website by simply the domain name, as in “example.com”. There are numerous
reasons for this change, including the simplicity of saying or writing the name and also smaller address bars on mobile browsers. If you are designing a large advertisement to display in, say, an airport hallway, you can make the domain name address larger and more visibile if you simply use “example.com” and drop the “www”. Additionally, some web browsers are no longer showing the full URL (or even any of the URL) and so the “www” is no longer visible.</t>

<t>Regardless of the reasons, the fact is that many website publishers and marketing/communications teams are moving to using only the domain name without the “www” or other subdomains to reference their public website.</t>

<t>The expectations from the marketing / communications teams are that:</t>

<t><list style="numbers">
  <t>users will be able to simply enter “example.com” into their browser; and</t>
  <t>users will only see “example.com” in their address bar (if URLs are even displayed).</t>
</list></t>

</section>
<section anchor="the-challenge" title="The Challenge">

<t>If the organization’s website is a simple web server with specific A and AAAA records, 
this change can be easily implemented by adding the appropriate A and AAAA records at
the zone apex.</t>

<t>However, most larger site publishers (and many smaller publishers) now use content distribution networks (CDNs), global load balancers, or some other form of a caching / load balancing network in front of their website. The result is that there is no single “A” or “AAAA” record for the organization’s website.</t>

<t>Publishers use CDNs for a variety of reasons, including:</t>

<t><list style="symbols">
  <t>Performance - connecting users to an edge server with the lowest latency</t>
  <t>Geo-location - connecting users to edge servers appropriate for their geography</t>
  <t>DDoS / security - using various security mechanisms provided by CDNs</t>
  <t>IPv6 - using a CDN to offer IPv6 access when the origin server is only on IPv4</t>
  <t>TLS - using a CDN to offer higher levels of TLS usage than possible with origin server</t>
</list></t>

<t>While there may be many non-CDN mechanisms to address those reasons, website publishers in 2018 are increasingly using CDNs as a simple business solution.</t>

<t>The DNS issue is that the website publisher is told to simply redirect all traffic to some address within the CDN along the lines of one of these:</t>

<t><list style="symbols">
  <t>a123qkt5y7xxb3df8.example-cdn.net</t>
  <t>(companyname).example-cdn.net</t>
  <t>(companyname).(location).example-cdn.net</t>
  <t>some-random-string.example-cdn.net</t>
</list></t>

<t>The CDN then performs its service of providing the requesting client with the A or AAAA record most appropriate for the client’s network/geographic location.</t>

<section anchor="note" title="Note">

<t>Some CDNs require that they manage the DNS services for the target domain name. The publisher must designate the CDN’s DNS servers as the authoritative name servers (NS records) for the domain. At that point the CDN handles all of the name resolution directly and dynamically returns the A and AAAA records back to the client web browser. The browser has no idea that a CDN is in usage.</t>

<t>However, this document is discussing CDNs where the publisher retains control of serving out DNS records for the domain.</t>

</section>
</section>
<section anchor="cname-works-for-subdomains" title="CNAME works for subdomains">

<t>For websites using a subdomain such as “www”, this is simply done in DNS using CNAME and pointing to a target URL provided by the CDN:</t>

<figure><artwork><![CDATA[
www.example.com  300  IN  CNAME a123qkt5y7xxb3df8.example-cdn.net
]]></artwork></figure>

<t>Now all web traffic to www.example.com is redirected to the CDN address. The CDN returns the appropriate A and AAAA records. This all works and the browser connects to the site hosted on one of the CDN edge servers.</t>

</section>
<section anchor="cname-at-apex-does-not-work" title="CNAME at apex does not work">

<t>For reasons outlined in Appendix C of <xref target="I-D.ietf-dnsop-aname"/> CNAME does not work at the apex of a domain. A primary reason is section 3.6.2 of <xref target="RFC1034"/>.</t>

</section>
<section anchor="proprietary-solutions" title="Proprietary solutions">

<t>To respond to this business demand, various DNS operators (including CDN providers who also act as DNS operators) have developed proprietary solutions (also referred to as “stupid DNS tricks” within the DNSOP community). Under various names such as “URL flattening” or “CNAME flattening”, these techniques do work and allow the sites to be accessible on the CDN via the simple domain name.</t>

<section anchor="proprietary-lockin" title="Proprietary lockin">

<t>However, because of the proprietary nature, they then lock the website publisher into using that DNS operator / CDN.  The website publisher does not have an easily ability to move to a different DNS operator / CDN unless the new DNS operator / CDN can also provide a mechanism to allow the non-www domain usage.</t>

</section>
<section anchor="restriction-on-using-multiple-cdns" title="Restriction on using multiple CDNs">

<t>Additionally, many large web site publishers use (or want to use) multiple CDNs to achieve various business objectives, including resiliency / availability. The lack of a standard mechanism to do this “CNAME at apex” functionality limits the ability to explore multi-CDN options.</t>

</section>
</section>
<section anchor="existing-and-proposed-solutions" title="Existing and proposed solutions">

<t>Various email discussions have indicated that existing mechanisms can address this issue, although deployment/adoption concerns have been raised. Existing solutions include:</t>

<t><list style="symbols">
  <t>SRV record - <xref target="RFC2052"/></t>
  <t>URI record - <xref target="RFC7553"/></t>
  <t>NAPTR-based solutions (need to understand more)</t>
</list></t>

<t>Multiple solutions have been proposed for discussion at IETF 103, including:</t>

<t><list style="symbols">
  <t><xref target="I-D.ietf-dnsop-aname"/></t>
  <t><xref target="I-D.bellis-dnsop-http-record"/></t>
</list></t>

</section>
<section anchor="author-opinion" title="Author opinion">

<t>As a website publisher, I have a business objective to meet - make the site accessible over “example.com” versus “www.example.com”. As long as this can happen in a manner that can be widely deployed, I am not partial to any specific solution. I just want it to work and not lock me in to specific proprietary solutions.</t>

</section>
<section anchor="past-discussion" title="Past discussion">

<t>There was a lengthy discussion of this topic in the DNSOP session at IETF 102 in Montreal in 2018. Slides from that session are useful for more context:</t>

<t><list style="symbols">
  <t>https://datatracker.ietf.org/meeting/102/materials/slides-102-dnsop-somethingapex-02</t>
  <t>https://datatracker.ietf.org/meeting/102/materials/slides-102-dnsop-cnameapex-00</t>
</list></t>

</section>
<section anchor="conventions-and-definitions" title="Conventions and Definitions">

<t>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”,
“SHOULD NOT”, “RECOMMENDED”, “NOT RECOMMENDED”, “MAY”, and “OPTIONAL” in this
document are to be interpreted as described in BCP 14 <xref target="RFC2119"/> <xref target="RFC8174"/>
when, and only when, they appear in all capitals, as shown here.</t>

</section>
<section anchor="security-considerations" title="Security Considerations">

<t>TODO add any security considerations.</t>

</section>
<section anchor="iana-considerations" title="IANA Considerations">

<t>This document has no IANA actions.</t>

</section>


  </middle>

  <back>

    <references title='Normative References'>





<reference  anchor="RFC2119" target='https://www.rfc-editor.org/info/rfc2119'>
<front>
<title>Key words for use in RFCs to Indicate Requirement Levels</title>
<author initials='S.' surname='Bradner' fullname='S. Bradner'><organization /></author>
<date year='1997' month='March' />
<abstract><t>In many standards track documents several words are used to signify the requirements in the specification.  These words are often capitalized. This document defines these words as they should be interpreted in IETF documents.  This document specifies an Internet Best Current Practices for the Internet Community, and requests discussion and suggestions for improvements.</t></abstract>
</front>
<seriesInfo name='BCP' value='14'/>
<seriesInfo name='RFC' value='2119'/>
<seriesInfo name='DOI' value='10.17487/RFC2119'/>
</reference>



<reference  anchor="RFC8174" target='https://www.rfc-editor.org/info/rfc8174'>
<front>
<title>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</title>
<author initials='B.' surname='Leiba' fullname='B. Leiba'><organization /></author>
<date year='2017' month='May' />
<abstract><t>RFC 2119 specifies common key words that may be used in protocol  specifications.  This document aims to reduce the ambiguity by clarifying that only UPPERCASE usage of the key words have the  defined special meanings.</t></abstract>
</front>
<seriesInfo name='BCP' value='14'/>
<seriesInfo name='RFC' value='8174'/>
<seriesInfo name='DOI' value='10.17487/RFC8174'/>
</reference>




    </references>

    <references title='Informative References'>





<reference anchor="I-D.ietf-dnsop-aname">
<front>
<title>Address-specific DNS aliases (ANAME)</title>

<author initials='T' surname='Finch' fullname='Tony Finch'>
    <organization />
</author>

<author initials='E' surname='Hunt' fullname='Evan Hunt'>
    <organization />
</author>

<author initials='P' surname='Dijk' fullname='Peter van Dijk'>
    <organization />
</author>

<author initials='A' surname='Eden' fullname='Anthony Eden'>
    <organization />
</author>

<date month='October' day='19' year='2018' />

<abstract><t>This document defines the "ANAME" DNS RR type, to provide similar functionality to CNAME, but only for type A and AAAA queries.  Unlike CNAME, an ANAME can coexist with other record types.  The ANAME RR allows zone owners to make an apex domain name into an alias in a standards compliant manner.</t></abstract>

</front>

<seriesInfo name='Internet-Draft' value='draft-ietf-dnsop-aname-02' />
<format type='TXT'
        target='http://www.ietf.org/internet-drafts/draft-ietf-dnsop-aname-02.txt' />
</reference>



<reference  anchor="RFC1034" target='https://www.rfc-editor.org/info/rfc1034'>
<front>
<title>Domain names - concepts and facilities</title>
<author initials='P.V.' surname='Mockapetris' fullname='P.V. Mockapetris'><organization /></author>
<date year='1987' month='November' />
<abstract><t>This RFC is the revised basic definition of The Domain Name System.  It obsoletes RFC-882.  This memo describes the domain style names and their used for host address look up and electronic mail forwarding.  It discusses the clients and servers in the domain name system and the protocol used between them.</t></abstract>
</front>
<seriesInfo name='STD' value='13'/>
<seriesInfo name='RFC' value='1034'/>
<seriesInfo name='DOI' value='10.17487/RFC1034'/>
</reference>



<reference  anchor="RFC2052" target='https://www.rfc-editor.org/info/rfc2052'>
<front>
<title>A DNS RR for specifying the location of services (DNS SRV)</title>
<author initials='A.' surname='Gulbrandsen' fullname='A. Gulbrandsen'><organization /></author>
<author initials='P.' surname='Vixie' fullname='P. Vixie'><organization /></author>
<date year='1996' month='October' />
<abstract><t>This document describes a DNS RR which specifies the location of the server(s) for a specific protocol and domain (like a more general form of MX).  This memo defines an Experimental Protocol for the Internet community.</t></abstract>
</front>
<seriesInfo name='RFC' value='2052'/>
<seriesInfo name='DOI' value='10.17487/RFC2052'/>
</reference>



<reference  anchor="RFC7553" target='https://www.rfc-editor.org/info/rfc7553'>
<front>
<title>The Uniform Resource Identifier (URI) DNS Resource Record</title>
<author initials='P.' surname='Faltstrom' fullname='P. Faltstrom'><organization /></author>
<author initials='O.' surname='Kolkman' fullname='O. Kolkman'><organization /></author>
<date year='2015' month='June' />
<abstract><t>This document describes the already registered DNS resource record (RR) type, called the Uniform Resource Identifier (URI) RR, that is used for publishing mappings from hostnames to URIs.</t></abstract>
</front>
<seriesInfo name='RFC' value='7553'/>
<seriesInfo name='DOI' value='10.17487/RFC7553'/>
</reference>



<reference anchor="I-D.bellis-dnsop-http-record">
<front>
<title>A DNS Resource Record for HTTP</title>

<author initials='R' surname='Bellis' fullname='Ray Bellis'>
    <organization />
</author>

<date month='November' day='3' year='2018' />

<abstract><t>This document specifies an "HTTP" resource record type for the DNS to facilitate the lookup of the server hostname of HTTP(s) URIs.  It is intended to replace the use of CNAME records for this purpose, and in the process provides a solution for the inability of the DNS to allow a CNAME to be placed at the apex of a domain name.</t></abstract>

</front>

<seriesInfo name='Internet-Draft' value='draft-bellis-dnsop-http-record-00' />
<format type='TXT'
        target='http://www.ietf.org/internet-drafts/draft-bellis-dnsop-http-record-00.txt' />
</reference>




    </references>


<section numbered="false" anchor="acknowledgments" title="Acknowledgments">

<t>TODO acknowledge.</t>

</section>


  </back>

<!-- ##markdown-source:
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

-->

</rfc>

