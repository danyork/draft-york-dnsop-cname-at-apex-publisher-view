<?xml version="1.0" encoding="UTF-8"?>
  <?xml-stylesheet type="text/xsl" href="rfc2629.xslt" ?>
  <!-- generated by https://github.com/cabo/kramdown-rfc2629 version 1.2.9 -->

<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
]>

<?rfc toc="yes"?>
<?rfc sortrefs="yes"?>
<?rfc symrefs="yes"?>

<rfc ipr="trust200902" docName="draft-york-dnsop-cname-at-apex-publisher-view-01" category="info">

  <front>
    <title abbrev="CNAME at apex - a website publisher perspective">CNAME at apex - a website publisher perspective</title>

    <author initials="D." surname="York" fullname="Dan York">
      <organization>Internet Society</organization>
      <address>
        <email>york@isoc.org</email>
      </address>
    </author>

    <date year="2018" month="November" day="06"/>

    <area>General</area>
    <workgroup>DNSOP Working Group</workgroup>
    <keyword>Internet-Draft</keyword>

    <abstract>


<t>There has been a large amount of discussion about the “CNAME at apex” issue
within the DNSOP Working Group. This draft provides the perspective of one 
publisher of multiple websites about why CNAME-like functionality is desirable
at the apex of a domain zone.</t>



    </abstract>


  </front>

  <middle>


<section anchor="introduction" title="Introduction">

<t>From the early days of the Web, publishers of websites generally operated their
main public website using the “www” subdomain, as in “www.example.com”.</t>

<t>In recent years many organizations have moved to dropping the “www” and referring
to their main website by simply the domain name, as in “example.com”. There are numerous
reasons for this change, including the simplicity of saying or writing the name and also smaller address bars on mobile browsers. If you are designing a large advertisement to display in, say, an airport hallway, you can make the domain name address larger and more visibile if you simply use “example.com” and drop the “www”. Additionally, some web browsers are no longer showing the full URL (or even any of the URL) and so the “www” is no longer visible.</t>

<t>Regardless of the reasons, the fact is that many website publishers and marketing/communications teams are moving to using only the domain name without the “www” or other subdomains to reference their public website.</t>

<t>The expectations from the marketing / communications teams are that:</t>

<t><list style="numbers">
  <t>users will be able to simply enter “example.com” into their browser; and</t>
  <t>users will only see “example.com” in their address bar (if URLs are even displayed).</t>
</list></t>

</section>
<section anchor="the-challenge" title="The Challenge">

<t>If the organization’s website is a simple web server with specific A and AAAA records, 
this change can be easily implemented by adding the appropriate A and AAAA records at
the zone apex.</t>

<t>However, most larger site publishers (and many smaller publishers) now use content distribution networks (CDNs), global load balancers, or some other form of a caching / load balancing network in front of their website. The result is that there is no single “A” or “AAAA” record for the organization’s website.</t>

<t>Publishers use CDNs for a variety of reasons, including:</t>

<t><list style="symbols">
  <t>Performance - connecting users to an edge server with the lowest latency</t>
  <t>Geo-location - connecting users to edge servers appropriate for their geography</t>
  <t>DDoS / security - using various security mechanisms provided by CDNs</t>
  <t>IPv6 - using a CDN to offer IPv6 access when the origin server is only on IPv4</t>
  <t>TLS - using a CDN to offer higher levels of TLS usage than possible with origin server</t>
</list></t>

<t>While there may be many non-CDN mechanisms to address those reasons, website publishers in 2018 are increasingly using CDNs as a simple business solution.</t>

<t>The DNS issue is that the website publisher is told to simply redirect all traffic to some address within the CDN along the lines of one of these:</t>

<t><list style="symbols">
  <t>a123qkt5y7xxb3df8.example-cdn.net</t>
  <t>(companyname).example-cdn.net</t>
  <t>(companyname).(location).example-cdn.net</t>
  <t>some-random-string.example-cdn.net</t>
</list></t>

<t>The CDN then performs its service of providing the requesting client with the A or AAAA record most appropriate for the client’s network/geographic location.</t>

<section anchor="note" title="Note">

<t>Some CDNs require that they manage the DNS services for the target domain name. The publisher must designate the CDN’s DNS servers as the authoritative name servers (NS records) for the domain. At that point the CDN handles all of the name resolution directly and dynamically returns the A and AAAA records back to the client web browser. The browser has no idea that a CDN is in usage.</t>

<t>However, this document is discussing CDNs where the publisher retains control of serving out DNS records for the domain.</t>

</section>
</section>
<section anchor="cname-works-for-subdomains" title="CNAME works for subdomains">

<t>For websites using a subdomain such as “www”, this is simply done in DNS using CNAME:</t>

<figure><artwork><![CDATA[
www.example.com  300  IN  CNAME a123qkt5y7xxb3df8.example-cdn.net
]]></artwork></figure>

<t>Now all web traffic to www.example.com is redirected to the CDN address. The CDN returns the appropriate records. All is fine.</t>

</section>
<section anchor="cname-at-apex-does-not-work" title="CNAME at apex does not work">

<t>For reasons outlined in Appendix C of <xref target="I-D.ietf-dnsop-aname"/> CNAME does not work at the apex of a domain. A primary reason is section 3.6.2 of <xref target="RFC1034"/>.</t>

</section>
<section anchor="proprietary-solutions" title="Proprietary solutions">

<t>To respond to this business demand, various DNS operators (including CDN providers who also act as DNS operators) have developed proprietary solutions (also referred to as “stupid DNS tricks” within the DNSOP community). Under various names such as “URL flattening” or “CNAME flattening”, these techniques do work and allow the sites to be accessible on the CDN via the simple domain name.</t>

<section anchor="proprietary-lockin" title="Proprietary lockin">

<t>However, because of the proprietary nature, they then lock the website publisher into using that DNS operator / CDN.  The website publisher does not have an easily ability to move to a different DNS operator / CDN unless the new DNS operator / CDN can also provide a mechanism to allow the non-www domain usage.</t>

</section>
<section anchor="restriction-on-using-multiple-cdns" title="Restriction on using multiple CDNs">

<t>Additionally, many large web site publishers use (or want to use) multiple CDNs to achieve various business objectives, including resiliency / availability. The lack of a standard mechanism to do this “CNAME at apex” functionality limits the ability to explore multi-CDN options.</t>

</section>
</section>
<section anchor="existing-and-proposed-solutions" title="Existing and proposed solutions">

<t>Various email discussions have indicated that existing mechanisms can address this issue, although deployment/adoption concerns have been raised. Existing solutions include:</t>

<t><list style="symbols">
  <t>SRV record - <xref target="RFC2052"/></t>
  <t>URI record - <xref target="RFC7553"/></t>
  <t>NAPTR-based solutions (need to understand more)</t>
</list></t>

<t>Multiple solutions have been proposed for discussion at IETF 103, including:</t>

<t><list style="symbols">
  <t><xref target="I-D.ietf-dnsop-aname"/></t>
  <t><xref target="I-D.bellis-dnsop-http-record"/></t>
</list></t>

</section>
<section anchor="author-opinion" title="Author opinion">

<t>As a website publisher, I have a business objective to meet - make the site accessible over “example.com” versus “www.example.com”. As long as this can happen in a manner that can be widely deployed, I am not partial to any specific solution. I just want it to work and not lock me in to specific proprietary solutions.</t>

</section>
<section anchor="past-discussion" title="Past discussion">

<t>There was a lengthy discussion of this topic in the DNSOP session at IETF 102 in Montreal in 2018. Slides from that session are useful for more context:</t>

<t><list style="symbols">
  <t>https://datatracker.ietf.org/meeting/102/materials/slides-102-dnsop-somethingapex-02</t>
  <t>https://datatracker.ietf.org/meeting/102/materials/slides-102-dnsop-cnameapex-00</t>
</list></t>

</section>
<section anchor="conventions-and-definitions" title="Conventions and Definitions">

<t>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”,
“SHOULD NOT”, “RECOMMENDED”, “NOT RECOMMENDED”, “MAY”, and “OPTIONAL” in this
document are to be interpreted as described in BCP 14 <xref target="RFC2119"/> <xref target="RFC8174"/>
when, and only when, they appear in all capitals, as shown here.</t>

</section>
<section anchor="security-considerations" title="Security Considerations">

<t>TODO add any security considerations.</t>

</section>
<section anchor="iana-considerations" title="IANA Considerations">

<t>This document has no IANA actions.</t>

</section>


  </middle>

  <back>

    <references title='Normative References'>





<reference  anchor="RFC2119" target='https://www.rfc-editor.org/info/rfc2119'>
<front>
<title>Key words for use in RFCs to Indicate Requirement Levels</title>
<author initials='S.' surname='Bradner' fullname='S. Bradner'><organization /></author>
<date year='1997' month='March' />
<abstract><t>In many standards track documents several words are used to signify the requirements in the specification.  These words are often capitalized. This document defines these words as they should be interpreted in IETF documents.  This document specifies an Internet Best Current Practices for the Internet Community, and requests discussion and suggestions for improvements.</t></abstract>
</front>
<seriesInfo name='BCP' value='14'/>
<seriesInfo name='RFC' value='2119'/>
<seriesInfo name='DOI' value='10.17487/RFC2119'/>
</reference>



<reference  anchor="RFC8174" target='https://www.rfc-editor.org/info/rfc8174'>
<front>
<title>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</title>
<author initials='B.' surname='Leiba' fullname='B. Leiba'><organization /></author>
<date year='2017' month='May' />
<abstract><t>RFC 2119 specifies common key words that may be used in protocol  specifications.  This document aims to reduce the ambiguity by clarifying that only UPPERCASE usage of the key words have the  defined special meanings.</t></abstract>
</front>
<seriesInfo name='BCP' value='14'/>
<seriesInfo name='RFC' value='8174'/>
<seriesInfo name='DOI' value='10.17487/RFC8174'/>
</reference>




    </references>

    <references title='Informative References'>





<reference anchor="I-D.ietf-dnsop-aname">
<front>
<title>Address-specific DNS aliases (ANAME)</title>

<author initials='T' surname='Finch' fullname='Tony Finch'>
    <organization />
</author>

<author initials='E' surname='Hunt' fullname='Evan Hunt'>
    <organization />
</author>

<author initials='P' surname='Dijk' fullname='Peter van Dijk'>
    <organization />
</author>

<author initials='A' surname='Eden' fullname='Anthony Eden'>
    <organization />
</author>

<date month='October' day='19' year='2018' />

<abstract><t>This document defines the "ANAME" DNS RR type, to provide similar functionality to CNAME, but only for type A and AAAA queries.  Unlike CNAME, an ANAME can coexist with other record types.  The ANAME RR allows zone owners to make an apex domain name into an alias in a standards compliant manner.</t></abstract>

</front>

<seriesInfo name='Internet-Draft' value='draft-ietf-dnsop-aname-02' />
<format type='TXT'
        target='http://www.ietf.org/internet-drafts/draft-ietf-dnsop-aname-02.txt' />
</reference>



<reference  anchor="RFC1034" target='https://www.rfc-editor.org/info/rfc1034'>
<front>
<title>Domain names - concepts and facilities</title>
<author initials='P.V.' surname='Mockapetris' fullname='P.V. Mockapetris'><organization /></author>
<date year='1987' month='November' />
<abstract><t>This RFC is the revised basic definition of The Domain Name System.  It obsoletes RFC-882.  This memo describes the domain style names and their used for host address look up and electronic mail forwarding.  It discusses the clients and servers in the domain name system and the protocol used between them.</t></abstract>
</front>
<seriesInfo name='STD' value='13'/>
<seriesInfo name='RFC' value='1034'/>
<seriesInfo name='DOI' value='10.17487/RFC1034'/>
</reference>

<reference anchor="RFC2052"> <front> <title>*** BROKEN REFERENCE ***</title> <author> <organization/> </author> <date/> </front> </reference>
<reference anchor="RFC7553"> <front> <title>*** BROKEN REFERENCE ***</title> <author> <organization/> </author> <date/> </front> </reference>


<reference anchor="I-D.bellis-dnsop-http-record">
<front>
<title>A DNS Resource Record for HTTP</title>

<author initials='R' surname='Bellis' fullname='Ray Bellis'>
    <organization />
</author>

<date month='November' day='3' year='2018' />

<abstract><t>This document specifies an "HTTP" resource record type for the DNS to facilitate the lookup of the server hostname of HTTP(s) URIs.  It is intended to replace the use of CNAME records for this purpose, and in the process provides a solution for the inability of the DNS to allow a CNAME to be placed at the apex of a domain name.</t></abstract>

</front>

<seriesInfo name='Internet-Draft' value='draft-bellis-dnsop-http-record-00' />
<format type='TXT'
        target='http://www.ietf.org/internet-drafts/draft-bellis-dnsop-http-record-00.txt' />
</reference>




    </references>


<section numbered="false" anchor="acknowledgments" title="Acknowledgments">

<t>TODO acknowledge.</t>

</section>


  </back>

<!-- ##markdown-source:
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
U3nLHAAA

-->

</rfc>

